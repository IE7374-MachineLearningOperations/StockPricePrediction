steps:
# Step 1: Clone the repository
- name: 'gcr.io/cloud-builders/git'
  args: ['clone', 'https://github.com/IE7374-MachineLearningOperations/StockPricePrediction.git']

# Step 2: Change directory to the cloned repository
- name: 'gcr.io/cloud-builders/bash'
  args:
    - '-c'
    - |
      cd StockPricePrediction &&
      echo "Repository cloned successfully"

# Step 3: Upload specific files to GCP Bucket
- name: 'gcr.io/cloud-builders/gsutil'
  args:
    - '-m'
    - 'cp'
    - '-r'
    - 'StockPricePrediction/*.py'
    - 'StockPricePrediction/*.ipynb'
    - 'StockPricePrediction/*.h5'
    - 'gs://stock_price_prediction_dataset/'

# Artifacts 
artifacts:
  objects:
    location: 'gs://stock_price_prediction_dataset/artifacts/'
    paths:
      - 'StockPricePrediction/*.py'
      - 'StockPricePrediction/*.ipynb'
      - 'StockPricePrediction/*.h5'

timeout: '1200s'
